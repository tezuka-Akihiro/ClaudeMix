# サブエージェント設計書テンプレート

## エージェント名: [エージェント名]

 | バージョン | 状態 | 作成日 | 最終更新日 | 作成者 |
 | :--- | :--- | :--- | :--- | :--- |
 | 1.0 | Draft | YYYY-MM-DD | YYYY-MM-DD | [作成者名] |

 ---

### 1. 概要 (Overview)

 **一行説明**:
 > このエージェントの役割を一行で簡潔に説明します。
 > 例: メインエージェントの作業状況を監視し、進捗管理ドキュメントを自動更新する開発支援サブエージェント

 ---

### 2. 目的と背景 (Purpose & Background)

#### 2.1 目的 (What)
 >
 > このエージェントが達成すべき具体的な目標をリスト形式で記述します。

 1. **目的1**:
 2. **目的2**:
 3. ...

#### 2.2 背景 (Why)
 >
 > なぜこのエージェントが必要なのかを「問題」「原因」「解決策」の観点から記述します。

- **問題**:
- **原因**:
- **解決策**:

#### 2.3 スコープ
 >
 > このエージェントが責任を持つ範囲（In-Scope）と、持たない範囲（Out-of-Scope）を明確にします。

- **In-Scope (対象範囲)**:
- **Out-of-Scope (対象外)**:

 ---

### 3. 主要な責務 (Core Responsibilities)

 > このエージェントが担当する主要な機能を3〜5個の箇条書きで列挙します。

- **責務1**: (例: 情報源の監視)
- **責務2**: (例: 状態の分析)
- **責務3**: (例: アクションの実行)

 ---

### 4. アーキテクチャと連携 (Architecture & Collaboration)

#### 4.1 アーキテクチャ上の位置づけ
 >
 > プロジェクト全体の中でどのような役割を担うか記述します。
 > 例: `scripts/` 配下に配置する独立した開発支援ツール。アプリケーション本体のロジックには依存しない。

#### 4.2 アーキテクチャ図 (最終形態)
 >
 > システム全体の連携が視覚的にわかる図を記述します。Mermaid.jsなどのテキストベースの図を推奨します。

 ~~~mermaid
 graph TD
     A[Component A] -->|Data Flow| B(Component B)
     B --> C{Decision}
     C -->|Yes| D[Action 1]
     C -->|No| E[Action 2]
 ~~~

#### 4.3 起動トリガー
 >
 > このエージェントがどのように起動されるかを記述します。
 > 例:
 >
 > - 手動起動: `@AgentName "command"`
 > - イベントドリブン: 特定のファイル変更を検知して自動起動
 > - スケジュール実行: 定期的に（例: 1時間ごと）実行

#### 4.4 連携するエージェント/モジュール
 >
 > 依存関係のある他のモジュールやエージェントをリストアップします。

- **入力元**:
- **出力先**:

#### 4.5 入出力 (I/O)

- **入力 (Input)**:
- **出力 (Output)**:

 ---

### 5. 動作仕様 (Operational Specification)

#### 5.1 主要ロジック
 >
 > 最も重要な処理の流れを擬似コードやフローチャートで記述します。

 ~~~
 function main_logic(input) {
   // 1. 入力を検証
   validated_input = validate(input)
 
   // 2. データを処理
   processed_data = process(validated_input)
 
   // 3. 結果を生成
   result = generate_output(processed_data)
 
   return result
 }
 ~~~

#### 5.2 エラーハンドリング
 >
 > 想定される主要なエラーと、その対処方針を記述します。

- **エラーケース1**: (例: 入力ファイルのパース失敗)
  - **対処**: エラーログを記録し、処理を中断。ユーザーにフォーマット誤りを通知。
- **エラーケース2**: (例: 外部API通信失敗)
  - **対処**: リトライ処理を3回実行。成功しない場合はエラーログを記録し、デフォルト値を返す。

 ---

### 6. 実装計画 (Implementation Plan)

#### 6.1 技術スタック

- **言語**:
- **主要ライブラリ/フレームワーク**:

#### 6.2 ファイル構成
 >
 > 想定されるディレクトリ構造をツリー形式で記述します。

 ~~~
 src/
 └── agents/
     └── [agent-name]/
         ├── core/
         │   ├── logic1.ts
         │   └── logic2.ts
         ├── types.ts
         └── index.ts
 ~~~

#### 6.3 段階的実装 (ロードマップ)
 >
 > 機能をフェーズ分けし、段階的に実装する計画を記述します。これはリスクを管理し、早期に価値を提供するために非常に重要です。

- **Phase 1: MVP (Minimum Viable Product)**
  - **実装内容**:
  - **成功基準**:
  - **実装期間**:
- **Phase 2: 機能拡張**
  - **実装内容**:
  - **成功基準**:
  - **実装期間**:
- **Phase 3: 自動化と安定化**
  - **実装内容**:
  - **成功基準**:
  - **実装期間**:

 ---

### 7. 評価 (Evaluation)

#### 7.1 成功基準 (Success Metrics)

- **定量指標**:
   > 数値で測定可能な目標を記述します。
   > 例: 自動化率95%以上、処理時間平均5秒以内、エラー発生率1%未満
- **定性指標**:
   > 数値化は難しいが重要な目標を記述します。
   > 例: 開発者体験が向上したか、進捗の可視性が高まったか

#### 7.2 テスト戦略

- **ユニットテスト**:
  - **対象**:
  - **カバレッジ目標**:
- **統合テスト**:
  - **シナリオ**:
- **E2Eテスト**:
  - **シナリオ**:

 ---

### 8. 非機能要件 (Non-Functional Requirements)

- **パフォーマンス**: (例: 1000ファイルの処理を30秒以内に完了)
- **セキュリティ**: (例: 外部入力はすべてサニタイズする)
- **保守性**:
  - **ロギング**: どのレベルの情報をどこに出力するか。
  - **設定管理**: 設定値をコードから分離し、環境変数や設定ファイルで管理する。

 ---

### 9. 設計レビュー (Design Review)

#### 9.1 懸念事項とリスク
 >
 > 実装前に洗い出された懸念点や技術的リスク、その対策を記述します。

- **リスク1**:
  - **対策**:
- **リスク2**:
  - **対策**:

#### 9.2 アーキテクチャ整合性チェック
 >
 > プロジェクト全体の設計原則と整合性が取れているかを確認します。

- [ ] 3大層アーキテクチャとの整合性
- [ ] TDD原則との整合性
- [ ] ディレクトリ構造の規約遵守

 ---

### 10. 改訂履歴 (Revision History)

 | バージョン | 日付 | 変更内容 | 変更者 |
 | :--- | :--- | :--- | :--- |
 | 1.0 | YYYY-MM-DD | 初版作成 | [作成者名] |
 | | | | |
