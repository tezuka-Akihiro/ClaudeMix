# MOCK_POLICY.md - Common Components

## 1. ãƒ¢ãƒƒã‚¯å¯¾è±¡

- **UI/UXå**:
  - Headerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•çš„ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºï¼ˆã‚µãƒ¼ãƒ“ã‚¹/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ï¼‰
  - Footerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³æ©Ÿèƒ½

- **ãƒ¢ãƒƒã‚¯æ™‚ã®æŒ™å‹•**:
  - `loader` ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’èª­ã¾ãšã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’è¿”ã™ã€‚
  - `action` ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†ã‚’å®Ÿè¡Œã›ãšã«ã€å¸¸ã«æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã€‚

- **æ­£å®Ÿè£…æ™‚ã®æŒ™å‹•**:
  - `loader` ã¯ã€`data-io`å±¤ã‚’ä»‹ã—ã¦ `project.toml` ã‚’å®Ÿéš›ã«èª­ã¿è¾¼ã¿ã€ã‚µãƒ¼ãƒ“ã‚¹/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’ç”Ÿæˆã™ã‚‹ã€‚
  - `action` ã¯ã€`data-io`å±¤ã‚’ä»‹ã—ã¦å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

- **ç›®çš„**:
  - `data-io`å±¤ã®å®Ÿè£…ãŒå®Œäº†ã™ã‚‹å‰ã«ã€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆHeader, Footerï¼‰ã®TDDã‚µã‚¤ã‚¯ãƒ«ã‚’å…ˆè¡Œã—ã¦é€²ã‚ã‚‹ãŸã‚ã€‚
  - UIã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å‰¯ä½œç”¨ã‹ã‚‰åˆ‡ã‚Šé›¢ã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚

- **å¯¿å‘½**:
  - UIå±¤ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã€`data-io`å±¤ã®å®Ÿè£…ã«ç€æ‰‹ã™ã‚‹æ™‚ç‚¹ã§ã€ã“ã®ãƒ¢ãƒƒã‚¯ã¯ç ´æ£„ã•ã‚Œã€å®Ÿå®Ÿè£…ã«ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã€‚

---

## 2. é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å±¤åˆ¥ï¼‰

| å±¤ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | é–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ¢ãƒƒã‚¯è¨­å®š | å®Ÿè£…è¨­å®š |
|:---|:---|:---|:---|:---|
| ðŸ”Œ **data-ioå±¤** | `app/data-io/flow-auditor/common/loadServiceList.server.ts` | `loadServiceList` | `["flow-auditor", "flow-auditor"]` ã®å›ºå®šé…åˆ—ã‚’è¿”ã™ã€‚ | `project.toml` ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã€`Object.keys(services)` ã‚’è¿”ã™ã€‚ |
| ðŸ”Œ **data-ioå±¤** | `app/data-io/flow-auditor/common/loadSectionList.server.ts` | `loadSectionList` | `["common", "design-flow", "implementation-flow"]` ã®å›ºå®šé…åˆ—ã‚’è¿”ã™ã€‚ | `project.toml` ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã€æŒ‡å®šã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’è¿”ã™ã€‚ |
| ðŸ”Œ **data-ioå±¤** | `app/data-io/flow-auditor/common/executeRetry.server.ts` | `executeRetry` | ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚’è¡Œã‚ãšã€`{ success: true, archivedFiles: ["mock/path/to/file.md"] }` ã‚’è¿”ã™ã€‚ | `fs.renameSync` ã‚’ä½¿ç”¨ã—ã¦å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã™ã‚‹ã€‚ |
| ðŸ§  **ç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯å±¤** | `app/lib/flow-auditor/common/retryStepBuilder.ts` | `buildRetrySteps` | `loader`ãŒã“ã®é–¢æ•°ã‚’å‘¼ã°ãªããªã‚‹ãŸã‚ã€ãƒ¢ãƒƒã‚¯ã¯ä¸è¦ã€‚ | `loader`ãŒã“ã®é–¢æ•°ã‚’å‘¼ã°ãªããªã‚‹ãŸã‚ã€å®Ÿè£…ã¯ä¸è¦ã€‚ |

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒãƒªã‚·ãƒ¼

- **é™çš„ãƒ‡ãƒ¼ã‚¿ä¸­å¿ƒ**: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¯ã€`func-spec.md` ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«æº–æ‹ ã—ãŸå›ºå®šã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯é…åˆ—ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
- **å†ç¾æ€§**: ãƒ†ã‚¹ãƒˆã®å®‰å®šæ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã€æ“¬ä¼¼ãƒ©ãƒ³ãƒ€ãƒ å€¤ã¯ä½¿ç”¨ã—ãªã„ã€‚

---

## 4. ä½¿ç”¨ãƒ«ãƒ¼ãƒ«

- **é©ç”¨ãƒ•ã‚§ãƒ¼ã‚º**: `TDD_WORK_FLOW.md` ã® `Phase 2: å±¤åˆ¥TDD` ã§ã€UIå±¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ã€‚
- **ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `vitest` ã® `vi.mock()` ã‚’ä½¿ç”¨ã—ã¦ã€`data-io`å±¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å…¨ä½“ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ã€‚
- **å“è³ªä¿è¨¼**: ã“ã®ãƒ¢ãƒƒã‚¯è‡ªä½“ã¯å“è³ªä¿è¨¼ã®å¯¾è±¡å¤–ã¨ã™ã‚‹ã€‚ã‚ãã¾ã§UIå±¤ã®ãƒ†ã‚¹ãƒˆã‚’å††æ»‘ã«é€²ã‚ã‚‹ãŸã‚ã®ã€Œä»®è¨­è¶³å ´ã€ã¨ä½ç½®ã¥ã‘ã‚‹ã€‚

### ãƒ¢ãƒƒã‚¯å®Ÿè£…ä¾‹ (ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…)

~~~typescript
import { vi } from 'vitest';

// data-ioå±¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ¢ãƒƒã‚¯åŒ–
vi.mock('~/data-io/flow-auditor/common/loadServiceList.server', () => ({
  loadServiceList: vi.fn().mockResolvedValue(["flow-auditor", "flow-auditor"]),
}));

vi.mock('~/data-io/flow-auditor/common/executeRetry.server', () => ({
  executeRetry: vi.fn().mockResolvedValue({ success: true, archivedFiles: [] }),
}));
~~~