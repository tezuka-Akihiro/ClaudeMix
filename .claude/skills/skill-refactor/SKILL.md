---
name: skill-refactor
description: 既存スキルをベストプラクティスに沿ってリファクタリングする。3層構成（SKILL.md/prompts/docs）への再構成、SSoT違反の解消、プロンプト品質の向上を行う。
allowed-tools: Read, Write, Edit, Glob, Grep, AskUserQuestion
---

# スキルリファクタースキル

既存スキルをベストプラクティスに沿ってリファクタリングするスキルです。

## When to Use

- 「/skill-refactor」と指示された時
- 既存スキルを3層構成に再構成したい時
- スキルの品質を向上させたい時
- 「スキルをリファクタして」と言われた時

## 実行フロー概要

```text
Phase 1: 分析 → prompts/01-analyze.md
    ↓
Phase 2: 計画 → prompts/02-plan.md
    ↓
Phase 3: 実行 → prompts/03-refactor.md
    ↓
完成
```

## 途中再開

「Phase 2から再開」のように指定可能。

---

## Phase 1: 分析

**参照**: `prompts/01-analyze.md`

1. 対象スキルを特定
2. チェックポイントで評価
3. 問題点を一覧化
4. 次フェーズへ自動遷移

---

## Phase 2: 計画

**参照**: `prompts/02-plan.md`

1. 問題点ごとの修正方針を策定
2. ファイル構成の設計（3層構成への移行）
3. 作業順序を決定
4. 次フェーズへ自動遷移

---

## Phase 3: 実行

**参照**: `prompts/03-refactor.md`

1. 計画に従ってファイルを作成/編集
2. チェックリストで最終確認
3. 旧ファイルの削除

---

## チェックポイント（9項目）

| # | 項目 | 確認内容 |
| :--- | :--- | :--- |
| 1 | ベストプラクティス準拠 | `content/blog/posts/` 配下のガイドに沿っているか |
| 2 | フォルダ構成 | SKILL.md / prompts/ / docs/（+ scripts/）に分離されているか |
| 3 | サイズ制限 | 各ファイルが400行以下か |
| 4 | プロンプト品質 | 6技術（明確性/例示/CoT/XML/システムプロンプト/事前入力）を活用しているか |
| 5 | SSoT | 重複がないか、情報源が一元化されているか |
| 6 | スキル分離 | 関連の強いスキルが不適切に分離されていないか |
| 7 | When to Use | いつ使うかが明確に記述されているか |
| 8 | allowed-tools | 必要最小限のツール権限か（scripts/がある場合はBash必須） |
| 9 | 参照ルール | 層間の参照方向が正しいか（循環参照がないか） |

---

## 成果物

| フェーズ | 成果物 |
| :--- | :--- |
| Phase 1 | 分析レポート（問題点一覧） |
| Phase 2 | リファクタリング計画 |
| Phase 3 | リファクタリング済みスキル |

---

## 参照ドキュメント

| ファイル | 役割 |
| :--- | :--- |
| `prompts/*.md` | 各フェーズの金型 |
| `docs/checklist.md` | 9項目チェックリスト詳細 |
| `docs/skill-architecture.md` | フォルダ構成と参照ルール定義 |
| `docs/best-practices.md` | ベストプラクティス参照先 |

---

## 注意事項

- **全フェーズを自動実行** - 分析→計画→実行を一気通貫で処理
- **旧ファイル削除は最後** - 新ファイル作成・確認後に削除
- **参考実装** - `.claude/skills/lp-manga/` をリファクタリング済みの参考として使用
