# スキル品質チェックリスト

スキルリファクタリング時の9項目チェックリスト詳細。

## 1. ベストプラクティス準拠

**参照**: `content/blog/posts/` 配下のガイド記事

| チェック項目 | 判定 |
| :--- | :--- |
| skills-guide.md の原則に沿っているか | [ ] |
| prompts-guide.md のプロンプト技術を活用しているか | [ ] |

## 2. フォルダ構成（3層 or 4層）

**参照**: `docs/skill-architecture.md`

**基本構成（3層）**:

```text
.claude/skills/{skill-name}/
├── SKILL.md             # 司令塔（Workflow）
├── prompts/             # 金型（Templates）
└── docs/                # 辞書（Knowledge）
```

**拡張構成（4層）** ※シェル操作が必要な場合:

```text
.claude/skills/{skill-name}/
├── SKILL.md
├── prompts/
├── scripts/             # 実行ラッパー（Actions）
└── docs/
```

| チェック項目 | 判定 |
| :--- | :--- |
| SKILL.md が存在するか | [ ] |
| prompts/ が存在するか | [ ] |
| docs/ が存在するか（必要な場合） | [ ] |
| scripts/ の追加が妥当か（必要性の判断） | [ ] |
| 各層の責務が守られているか | [ ] |

**各層の責務**:

| 層 | 責務 | 含めるもの | 含めないもの |
| :--- | :--- | :--- | :--- |
| SKILL.md | 司令塔 | フロー定義、参照先、When to Use | 詳細な指示、具体例 |
| prompts/ | 金型 | AI役割定義、実行手順、Output形式 | 設計思想の解説 |
| scripts/ | 実行 | 定型シェルコマンド、ラッパー | ビジネスロジック |
| docs/ | 辞書 | 設計基準、失敗パターン、テンプレート | 実行フロー |

## 3. サイズ制限

| チェック項目 | 基準 | 判定 |
| :--- | :--- | :--- |
| SKILL.md | 200行以下推奨 | [ ] |
| 各prompt-template | 200行以下推奨 | [ ] |
| 各docsファイル | 400行以下 | [ ] |

**サイズ超過時の対処**:

- 責務の分離が不十分 → 3層に分割
- 例示が多すぎる → 必要最小限に絞る
- 重複がある → SSoTで解消

## 4. プロンプト品質（6技術）

| 技術 | チェック項目 | 判定 |
| :--- | :--- | :--- |
| 明確性と直接性 | 曖昧な表現がない、具体的な指示がある | [ ] |
| マルチショット例示 | 良い例/悪い例が提示されている | [ ] |
| 思考の連鎖（CoT） | 段階的な思考プロセスが指示されている | [ ] |
| XMLタグ活用 | 構造化された入力形式がある（必要な場合） | [ ] |
| システムプロンプト | AI役割定義がある | [ ] |
| レスポンス事前入力 | Output形式が定義されている | [ ] |

## 5. SSoT（Single Source of Truth）

| チェック項目 | 判定 |
| :--- | :--- |
| 同じ情報が複数箇所に記述されていないか | [ ] |
| 重複がある場合、参照形式になっているか | [ ] |
| 使用コマンドがスキルフォルダ内で定義されているか | [ ] |

**SSoT違反の例**:

- SKILL.md と prompt-templates/ で同じチェックリストを記述
- 同じ Output形式 を複数ファイルで定義

**SSoT遵守の方法**:

- 詳細は prompt-templates/ に記載、SKILL.md は参照のみ
- 共通テンプレートは docs/ に配置

## 6. スキル分離

| チェック項目 | 判定 |
| :--- | :--- |
| 関連の強いスキルが不適切に分離されていないか | [ ] |
| 独立して呼び出せる単位になっているか | [ ] |

**分離すべきでないケース**:

- 同じワークフローの一部（例: tdd-red, tdd-green）
- 共通の docs/ を参照している
- 片方だけでは意味をなさない

**分離すべきケース**:

- 独立して呼び出せる
- 異なるユースケース
- 異なる成果物を生成

## 7. When to Use

| チェック項目 | 判定 |
| :--- | :--- |
| いつ使うかが明確に記述されているか | [ ] |
| 呼び出しコマンド（/skill-name）が記載されているか | [ ] |
| ユースケースが具体的か | [ ] |

**良い例**:

```markdown
## When to Use

- 「/skill-refactor」と指示された時
- 既存スキルを3層構成に再構成したい時
- スキルの品質を向上させたい時
```

**悪い例**:

```markdown
## When to Use

- 必要な時に使う
```

## 8. allowed-tools

| チェック項目 | 判定 |
| :--- | :--- |
| 必要最小限のツールのみ許可されているか | [ ] |
| 使用しないツールが含まれていないか | [ ] |
| scripts/ がある場合、Bash が含まれているか | [ ] |

**一般的なツール選択**:

| スキルの種類 | 推奨ツール |
| :--- | :--- |
| ファイル操作系 | Read, Write, Edit, Glob, Grep |
| 対話系 | AskUserQuestion |
| 実行系 | Bash（scripts/ がある場合は必須） |

## 9. 参照ルール

**参照**: `docs/skill-architecture.md`

層間の参照方向を検証する。循環参照は禁止。

| 参照元 ↓ / 参照先 → | SKILL.md | prompts/ | scripts/ | docs/ |
| :--- | :--- | :--- | :--- | :--- |
| **SKILL.md** | - | OK | OK | OK |
| **prompts/** | NG | - | OK | OK |
| **scripts/** | NG | NG | - | OK |
| **docs/** | NG | NG | NG | - |

| チェック項目 | 判定 |
| :--- | :--- |
| prompts/ から SKILL.md を参照していないか | [ ] |
| scripts/ から prompts/ を参照していないか | [ ] |
| docs/ から他の層を参照していないか | [ ] |

**違反例**:

- prompts/01-analyze.md 内で「SKILL.md のフローを参照」と記述 → NG
- scripts/run-lint.sh 内で prompts/ のファイルを読み込み → NG
- docs/errors.md 内で「prompts/01-analyze.md を修正せよ」と記述 → NG

**遵守方法**:

- 上位層（SKILL.md）が下位層を参照・呼び出す
- 下位層は自身より下の層のみ参照可能
- docs/ は参照されるのみ（能動的に他を呼ばない）
