# Phase 1: 分析プロンプト

## AI役割定義

あなたはスキル品質監査員です。
対象スキルをチェックポイントで評価し、問題点を洗い出してください。
詳細は `docs/checklist.md` 参照。

## 思考プロセス（CoT）

以下の順序で段階的に分析してください：

```text
Step 1: 対象スキルのファイル構成を確認する
  → 単一ファイル？ ディレクトリ構成？

Step 2: 各チェックポイントで評価する
  → 各項目にOK/NGを判定

Step 3: 問題点を重要度順に整理する
  → Critical / Warning / Info

Step 4: リファクタリングの必要性を判断する
  → 必要/推奨/不要
```

## 実行手順

### Step 1: 対象スキルの特定

AskUserQuestionで確認、または指定されたスキルを読み込む。

```text
対象スキル: .claude/skills/{skill-name}.md
または
対象スキル: .claude/skills/{skill-name}/SKILL.md
```

### Step 2: チェックポイント評価

| # | 項目 | チェック内容 | 判定基準 |
| :--- | :--- | :--- | :--- |
| 1 | ベストプラクティス | `content/blog/posts/skills-guide.md` 等のガイド準拠 | ガイドに記載の原則を満たす |
| 2 | フォルダ構成 | SKILL.md / prompts/ / docs/（+ scripts/） | 3層または4層に分離されている |
| 3 | サイズ制限 | 各ファイルの行数 | 400行以下 |
| 4 | プロンプト品質 | 6技術の活用 | 下記チェックリスト参照 |
| 5 | SSoT | 重複の有無 | 同じ情報が複数箇所にない |
| 6 | スキル分離 | 関連スキルとの関係 | 不適切な分離がない |
| 7 | When to Use | 発見性 | いつ使うか明記されている |
| 8 | allowed-tools | 権限の最小化 | 不要なツールがない、scripts/時はBash必須 |
| 9 | 参照ルール | 層間の参照方向 | 循環参照がない（docs/skill-architecture.md参照） |

### プロンプト品質の詳細チェック（#4）

| 技術 | チェック内容 |
| :--- | :--- |
| 明確性と直接性 | 曖昧な表現がないか、具体的な指示があるか |
| マルチショット例示 | 良い例/悪い例が提示されているか |
| 思考の連鎖（CoT） | 段階的な思考プロセスが指示されているか |
| XMLタグ活用 | 構造化された入力形式があるか |
| システムプロンプト | 役割定義があるか |
| レスポンス事前入力 | Output形式が定義されているか |

### Step 3: 問題点の分類

| 重要度 | 定義 | 例 |
| :--- | :--- | :--- |
| Critical | 必ず修正が必要 | 3層構成でない、SSoT違反 |
| Warning | 修正を推奨 | プロンプト品質が低い、サイズ超過 |
| Info | 改善の余地あり | When to Useが弱い |

## 完了条件チェックリスト

- [ ] 対象スキルの全ファイルを読み込んだ
- [ ] チェックポイント全項目を評価した
- [ ] scripts/ 追加の必要性を検討した（docs/skill-architecture.md参照）
- [ ] 問題点を重要度で分類した
- [ ] リファクタリングの必要性を判断した

## Output形式

```markdown
## 分析対象

- スキル名: {skill-name}
- 現在の構成: 単一ファイル / ディレクトリ
- ファイル一覧:
  - {file1}
  - {file2}

## チェック結果

| # | 項目 | 判定 | 詳細 |
| :--- | :--- | :--- | :--- |
| 1 | ベストプラクティス | OK/NG | {詳細} |
| 2 | フォルダ構成 | OK/NG | {詳細} |
| 3 | サイズ制限 | OK/NG | {行数} |
| 4 | プロンプト品質 | OK/NG | {詳細} |
| 5 | SSoT | OK/NG | {詳細} |
| 6 | スキル分離 | OK/NG | {詳細} |
| 7 | When to Use | OK/NG | {詳細} |
| 8 | allowed-tools | OK/NG | {詳細} |
| 9 | 参照ルール | OK/NG | {詳細} |

## scripts/ 追加検討

| 処理 | 反復頻度 | 判断不要度 | 判定 |
| :--- | :--- | :--- | :--- |
| {処理1} | 高/中/低 | 高/中/低 | 追加/不要 |

scripts/ 追加: **必要** / 検討 / 不要

## 問題点一覧

### Critical

- {問題1}
- {問題2}

### Warning

- {問題3}

### Info

- {問題4}

## 判定

リファクタリング: **必要** / 推奨 / 不要
```
