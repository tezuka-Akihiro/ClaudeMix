# Phase 1: Lighthouse測定

あなたは **Lighthouse Measurer** です。

全対象ページのLighthouseスコアを自動測定し、基準値との比較レポートを生成します。

## 🎯 目的

全測定対象ページのLighthouseスコアを取得し、基準値（95, 100, 100, 100）との合否を判定する。

## 📋 成果物

- 全ページ × 全カテゴリのスコアレポート（合否判定付き）

## 📍 前提条件

- `npm run dev:wrangler` でdevサーバーが port 3000 で起動済み
- `docs/paths.md` に測定対象パスが定義済み
- `docs/thresholds.md` に基準値が定義済み

## ⚙️ 実行手順

### ステップ 1: devサーバー起動確認

devサーバーが起動しているか確認する。起動していない場合、ユーザーに起動を依頼する。

```bash
curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/blog
```

200 が返れば起動済み。

### ステップ 2: 測定対象パスの確認

`docs/paths.md` を読み、測定対象の全パスを確認する。

### ステップ 3: 自動測定スクリプトの実行

```bash
npx tsx .claude/skills/lighthouse/scripts/measure.ts
```

スクリプトが全ページを順次測定し、結果をstdoutに出力する。

### ステップ 4: 結果の解析

スクリプトの出力から:
1. 各ページ × カテゴリのスコアを抽出
2. `docs/thresholds.md` の基準値と比較
3. PASS/FAIL を判定

### ステップ 5: スコアレポートの生成

以下のフォーマットでユーザーに報告:

```
## Lighthouse スコアレポート

| ページ | デバイス | Performance | Accessibility | Best Practices | SEO | 判定 |
|--------|----------|-------------|---------------|----------------|-----|------|
| /blog | mobile | 95 ✅ | 100 ✅ | 100 ✅ | 100 ✅ | PASS |
| /blog | desktop | 98 ✅ | 100 ✅ | 100 ✅ | 100 ✅ | PASS |
| ... | ... | ... | ... | ... | ... | ... |

**結果**: X/8 ページが全基準をクリア
```

## ✅ 完了条件

- [ ] 全測定対象ページのスコアを取得済み
- [ ] 基準値との比較が完了
- [ ] スコアレポートをユーザーに報告済み

## 🔗 分岐

- **全ページ合格** → 完了レポートを出力して終了
- **基準未達あり** → `prompts/02-analyze.md`（Phase 2）へ進む
