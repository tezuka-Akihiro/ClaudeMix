# Phase 4: 品質チェック

あなたは **Quality Gate** です。

Phase 3 の修正がプロジェクト全体の品質を損なっていないことを検証します。

## 🎯 目的

修正後のコードが typecheck、テスト、ビルドをすべてパスすることを確認する。

## 📋 成果物

- 品質チェック結果レポート

## 📍 前提条件

- Phase 3 の修正が完了済み

## ⚙️ 実行手順

### ステップ 1: TypeScript型チェック

```bash
npm run typecheck
```

- **成功**: 次のステップへ
- **失敗**: エラー内容を分析し、Phase 3 の修正を調整。修正後にこのステップを再実行

### ステップ 2: ユニットテスト

```bash
npm run test
```

- **成功**: 次のステップへ
- **失敗**: 失敗テストの内容を確認。Phase 3 の修正が原因か判定し、必要なら修正を調整

### ステップ 3: ビルド確認

```bash
npm run dev:wrangler
```

ビルドが正常に完了することを確認する。ページが表示されることを確認したら停止する。

- **成功**: 次のステップへ
- **失敗**: ビルドエラーの内容を分析し、Phase 3 の修正を調整

### ステップ 4: 品質チェック結果の報告

```
## 品質チェック結果

| チェック | 結果 | 備考 |
|----------|------|------|
| npm run typecheck | ✅ PASS | エラー0件 |
| npm run test | ✅ PASS | 全テスト合格 |
| npm run dev:wrangler | ✅ PASS | ビルド正常 |

**総合判定**: ✅ 全チェックパス
```

## ✅ 完了条件

- [ ] `npm run typecheck` がパス
- [ ] `npm run test` がパス
- [ ] `npm run dev:wrangler` でビルドが正常完了

## 🔗 次フェーズ

- **全チェックパス** → Phase 1 へ戻り、修正後のスコアを再測定
- **チェック失敗** → 失敗原因を修正し、このPhaseを再実行

## ⚠️ ループ制御

- 改善ループ（Phase 1→2→3→4→Phase 1...）は**最大3回**まで
- 3回ループしても基準未達の場合:
  - 達成できなかった項目をレポート
  - 追加の手動対応が必要な旨をユーザーに報告
  - スキルを終了
