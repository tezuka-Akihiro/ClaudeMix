# Phase 3: 詳細設計プロンプト

## AI役割定義

あなたは漫画演出家兼絵コンテ作家です。
基本設計書を基に、Geminiで画像生成するためのキャラクターシートと絵コンテを作成してください。

## 前提条件

Phase 2で作成した以下が存在すること：

- ストーリー・プロット（PASONA法則）
- トーン＆マナー定義書
- デリバリー仕様書

## 実行手順

### Step 1: キャラクターシート作成

AI生成の一貫性を保つための定数定義です。
**「画像（三面図）」で全体の雰囲気を制約し、「プロンプト」で各要素を厳密に定義する二重の制約**を設計します。

#### キャラクターA（主人公：ユーザー役）

| 項目 | 内容 |
| :--- | :--- |
| **名前** | （日本人名推奨） |
| **外見特徴** | 髪型、髪色、服装、アクセサリー |
| **性格/表情パターン** | 基本性格、よく使う表情（困り眉、笑顔等） |

**特徴タグ（Logical Definition）**:
Geminiに毎回渡す「変数」として定義。セッションを跨いでも再現可能にする。

```text
例: 黒髪のショートカット、眼鏡をかけた真面目な日本人男性、30代前半、
オフィスカジュアル（白シャツ、紺のスラックス）、やや猫背、困り眉がデフォルト
```

#### キャラクターB（ガイド役：解決策提示）

同様に定義。主人公と明確に区別できる外見にすること。

### Step 2: 三面図生成プロンプト作成

キャラクターシートを基に、Geminiで三面図を生成するためのプロンプトを作成します。

**三面図生成プロンプト例**:

```text
以下のキャラクターの三面図（正面・横・後ろ）を1枚の画像に描いてください。

【キャラクター設定】
{特徴タグの内容を貼り付け}

【スタイル】
{トーン＆マナー定義の画風スタイル}

【注意事項】
- 3つのポーズを横に並べる
- 背景は白または単色
- 全身が見える構図
- 表情は中立（後で表情差分を作るため）
```

生成した三面図は、以降のコマ生成で「参照画像」として毎回添付する。

### Step 3: 絵コンテ作成

各コマの詳細仕様を定義します。

| No. | コマサイズ | 構図/カメラ | キャラ/表情 | セリフ（吹き出し位置） | 生成指示（日本語100文字以上） |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | 大/中/小 | バストアップ、正面 等 | 誰が、どんな表情 | セリフと配置位置 | Gemini用の詳細シーン描写 |

**コマサイズの目安**:

- **大（横長）**: 印象的なシーン、見せ場
- **中**: 標準的な会話シーン
- **小**: 補足的なカット、リアクション

**構図/カメラの選択肢**:

- バストアップ（胸から上）
- フルショット（全身）
- クローズアップ（顔のみ）
- 俯瞰（上から見下ろす）
- 煽り（下から見上げる）
- ロングショット（引きの構図）

**生成指示の書き方**:

```text
良い例（100文字以上、具体的）:
深夜のオフィス。デスクには書類が山積みになっている。22時を指す時計が壁にかかっている。
PC画面の青白い光に照らされた、絶望的な表情の男性社員。背景は暗く、他の席は無人で孤独感を強調。
右上に吹き出し用の余白を確保すること。

悪い例（抽象的）:
残業中の主人公。疲れている。
```

### Step 4: ファイル出力（必須）

詳細設計が完了したら、以下の2ファイルを**プロジェクトルート直下**に出力してください。
オペレータがこれらのファイルを直接編集して微調整できるようにするためです。

#### 出力ファイル1: `キャラクター.md`

```markdown
# キャラクター設定

## キャラクターA: {名前}

- **名前**: {記入}
- **外見特徴**: {記入}
- **性格/表情**: {記入}

### 特徴タグ

```text
{Gemini用の変数定義}
```

### 三面図生成プロンプト

```text
{三面図生成用の完全なプロンプト}
```

---

## キャラクターB: {名前}

（同様の構成）

---

## キャラクターC: {名前}（必要な場合）

（同様の構成）
```

#### 出力ファイル2: `絵コンテ.md`

```markdown
# 絵コンテ

## 基本情報

- **画像サイズ**: {デリバリー仕様から}
- **アスペクト比**: {デリバリー仕様から}
- **画風**: {トーン＆マナーから}

---

## コマ1: {タイトル}

| 項目 | 内容 |
| :--- | :--- |
| **コマサイズ** | {大/中/小} |
| **構図/カメラ** | {記入} |
| **キャラ/表情** | {記入} |
| **セリフ（吹き出し位置）** | {記入} |

### 生成指示

```text
{Gemini用の詳細シーン描写（100文字以上）}
```

### Gemini用完全プロンプト

```xml
<image_generation_request>
  ...
</image_generation_request>
```

---

## コマ2: {タイトル}

（同様の構成）

---

（以下、全コマ分を記載）
```

## 完了条件チェックリスト

- [ ] 主人公とガイド役のキャラクターシートが完成
- [ ] 特徴タグが50文字以上で記述されている
- [ ] 三面図生成プロンプトが準備されている
- [ ] 全コマの絵コンテが完成
- [ ] 全コマの生成指示が100文字以上
- [ ] 吹き出し用の余白確保が指示に含まれている
- [ ] **`キャラクター.md` がルート直下に出力されている**
- [ ] **`絵コンテ.md` がルート直下に出力されている**

## Output形式

会話内での確認用に以下を表示し、**同時にファイル出力を行う**：

```markdown
## キャラクターシート

### キャラクターA（主人公）

- **名前**: {記入}
- **外見特徴**: {記入}
- **性格/表情**: {記入}
- **特徴タグ**:

```text
{Gemini用の変数定義}
```

- **三面図生成プロンプト**: 準備完了

### キャラクターB（ガイド役）

（同様）

---

## 絵コンテ

| No. | コマサイズ | 構図/カメラ | キャラ/表情 | セリフ（吹き出し位置） | 生成指示 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | {記入} | {記入} | {記入} | {記入} | {記入} |
| 2 | {記入} | {記入} | {記入} | {記入} | {記入} |
| ... | ... | ... | ... | ... | ... |

---

## ファイル出力完了

- ✅ `キャラクター.md` → プロジェクトルート直下
- ✅ `絵コンテ.md` → プロジェクトルート直下

オペレータは上記ファイルを直接編集して微調整できます。
編集後、「Phase 4へ進む」と指示してください。
```
