# LP漫画制作のドキュメント階層

## 概要

このドキュメントは、LP漫画制作の全体アーキテクチャを解説します。
開発のV字モデルのように、上流で定義し、下流で実装し、右側で検証する構造です。

## 5層アーキテクチャ

```text
┌─────────────────────────────────────────────────────────────┐
│                    Phase 1: 要件定義                          │
│  Input: ヒアリング → Output: ペルソナ、ゴール定義              │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 2: 基本設計                          │
│  Input: 要件定義 → Output: プロット、トンマナ、媒体仕様        │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 3: 詳細設計                          │
│  Input: 基本設計 → Output: キャラシート、三面図、絵コンテ      │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 4: 実装（画像生成）                   │
│  Input: 詳細設計 → Output: 画像素材、生成ログ                 │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Phase 5: 品質検証                          │
│  Input: 画像素材 → Output: 検品済み最終素材                   │
└─────────────────────────────────────────────────────────────┘
```

## 各層の責務

### 1. 要件定義層（Requirement）

システムの「目的」を定義する最上流のドキュメントです。

- **ターゲット・ペルソナ定義書**: 「誰の、どんな負債（悩み）を解消するか」を言語化
- **ゴール定義書（KPI）**: 読後、ユーザーにどう動いてほしいか（資料請求なのか、技術理解なのか）

### 2. 基本設計層（Concept Design）

「何を作るか」を決める、抽象度の高い設計です。

- **ストーリー・プロット（骨子）**: 全体の流れ（PASONA法則など）を、セリフではなく「状態の変化」で記述
- **トーン＆マナー定義書**: システムの「アーキテクチャ選定」に相当。画風、色彩、雰囲気を定義
- **デリバリー仕様書（媒体定義）**: LP上の表示形式、画像サイズ、ファイル形式の定義

### 3. 詳細設計層（Detailed Design）

AI（実装担当）に渡すための「仕様書」です。

- **キャラクター・シート（クラス定義）**: 属性（髪型、服装、持ち物）を定数として定義
  - **三面図の作成**: 言葉で説明しきれないニュアンスを固定するため、最初に「三面図」を生成
- **絵コンテ・スクリプト（詳細仕様書）**: 各コマの「構図」「カメラアングル」「キャラの表情」「セリフ」を定義
- **レイアウト指示書**: 吹き出し位置（DTP用スペース）や視線誘導の設計

### 4. 実装・加工層（Implementation & Refinement）

画像生成AIによる素材生成と、破綻修正（デバッグ）を行うフェーズです。

- **画像生成依頼テンプレート**: Geminiに対する「役割付与」「制約条件」「出力形式」を定義したプロンプト
- **アセット管理（Assets）**: 生成された「OKカット」の管理、部分修正や解像度アップの履歴

### 5. 品質保証層（Quality Assurance）

生成された素材が「漫画として成立しているか」「ブランドを毀損しないか」を検証するフェーズです。

- **検品チェックリスト**: 指の本数、キャラのブレ、背景の整合性などのチェック項目
- **コンプライアンスチェック**: 景表法・薬機法抵触の有無、商標の映り込みチェック

## V字モデルとの対応

| 階層 | ドキュメント名 | 開発における役割 | 成果物 |
| :--- | :--- | :--- | :--- |
| 上流 | ターゲット/ゴール定義 | 要求分析 | 制作の「軸」 |
| 中流 | ストーリー・プロット | 基本設計 | 構成案（ネーム） |
| 中流 | キャラクター/レイアウト定義 | 詳細設計 | キャラクターシート/絵コンテ |
| 下流 | 生成・修正（Inpainting） | コーディング/デバッグ | クリーンな画像素材 |
| QA | 検品チェックリスト | テスト/QA | OKカット |
| 最終 | コマ割り・写植・DTP | ビルド/デプロイ | 完成版LP画像 |

## 二重制約アプローチ

Geminiでキャラクターの一貫性を維持するため、以下の二重制約を採用します：

```text
┌────────────────────────────────────────┐
│         画像参照（三面図）               │
│  → 全体の雰囲気・ビジュアル特徴を制約   │
└────────────────────────────────────────┘
                    +
┌────────────────────────────────────────┐
│         プロンプト（特徴タグ）           │
│  → 要素を厳密に定義（再現性担保）       │
└────────────────────────────────────────┘
                    ↓
            AI特有のゆらぎを最小化
```

これは「型定義（TypeScript）＋実装（JavaScript）」のような二重バリデーションに相当します。
