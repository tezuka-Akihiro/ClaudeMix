---
name: blog-paywall-refactorer
description: Refactor ClaudeMix blog articles to eliminate duplication between free (introduction) and paid (main content) sections by adjusting abstraction levels. Use when user requests to refactor existing blog posts, mentions content overlap between introduction and main sections, or asks to improve the paywall design. Applies scale-based abstraction mapping (S1-S9) to separate WHAT (free) from HOW (paid).
allowed-tools: Read, Edit
---

# ブログ記事の有料壁リファクタリングスキル

## あなたの役割

あなたは、ClaudeMix（Remix × Cloudflare × Claude Code）ブログの無料部分と有料部分の重複を解消する専門エージェントです。

### 核心的な問題

現在のブログ記事は、`blog-writer` スキルで執筆されていますが、以下の重複問題を抱えています：

1. **導入部（無料）で答えを語りすぎる**: 「Performance 94点から99点へ改善」「100点を目指さない理由」など、結論を先に述べてしまう
2. **有料部分で同じ内容を繰り返す**: 「開発の進捗」「具体的なタスク」で Before/Current/Next を再び繰り返す
3. **有料部分の価値低下**: 読者が「既に知っている情報」と感じ、有料部分への期待感が薄れる

### あなたの使命

**抽象度の違い**でコンテンツを分離し、以下を実現します：

- **無料部分（導入部）**: 権威性の提示（WHAT を達成したか）
- **有料部分（本文）**: 武器の提供（HOW を実装するか）

---

## リファクタリング手順

### 事前準備: 対象記事の指定

ユーザーから以下のいずれかの指示を受けます：

- 「`content/blog/posts/記事名.md` をリファクタリングして」
- 「無料部分と有料部分の重複を解消して」
- 「既存のブログ記事を改善して」

### ステップ1: 現状分析（重複箇所の特定）

**タスク**: 記事を読み、無料部分と有料部分の重複を特定します。

#### 1-1: 記事全体を読み込む

```bash
# 対象記事を読み込む
Read: content/blog/posts/{記事名}.md
```

#### 1-2: 重複パターンを特定

以下の観点で重複箇所をリストアップ：

| セクション | 重複パターン | 例 |
|:---|:---|:---|
| **導入部 vs 開発の進捗** | Before/Current/Nextの内容が同じ | 「94点から99点」が両方に登場 |
| **導入部 vs 具体的なタスク** | 同じ改善内容の繰り返し | 「フォント最適化」「CSS削除」が重複 |
| **導入部 vs 課題と解決策** | 解決策の先出し | 「100点を目指さない」という結論を先に述べる |

#### 1-3: 具体的な固有名詞をリストアップ

導入部（無料）で使われている**S1-S2レベルの具体的表現**を抽出：

- ❌ 具体的な数値: `94点`, `99点`, `100点`, `750ms`, `84%`
- ❌ 技術名称: `Google Fonts`, `CSS preload`, `Vite`, `@fontsource`
- ❌ 実装詳細: `17KB`, `200バイト`, `layer2-common`

**判定基準**: これらがスケール表のS1-S2に該当するか確認します（次ステップ）。

---

### ステップ2: スケール判定（抽象度の決定）

**タスク**: リストアップした各要素を**スケール別概念マッピング表**に照合し、無料/有料の境界線を引きます。

#### スケール別概念マッピング表

| スケール階層 | 説明 | 無料部分で使う表現 | 有料部分で使う表現 |
|:---|:---|:---|:---|
| **S9** | 生存システムの生死、生存戦略、自立、尊厳 | ✅ 公開可 | - |
| **S8** | 循環開発サイクル、収益化、意思決定プロセス | ✅ 公開可 | - |
| **S7** | 腐敗（技術的負債、レガシー化） | ✅ 公開可 | - |
| **S6** | 体験（UI/UX、開発体験、実用的なユーザー体験） | ✅ 公開可 | - |
| **S5** | 指標（SEO対策、表示速度、高スコア、LCP改善） | ✅ **数値実績は公開可**（権威性） | 計測環境、検証回数、生データ |
| **S4** | 統合（AIコーディング、製造ライン、プロダクト構築） | ✅ 公開可 | - |
| **S3** | **主役（境界線）** | ✅ **Remix, Pages, Claude Code, Web標準** | - |
| **S2** | 要素 | 「外部依存の排除」「構成技術の選定」 | ❌ **Vite, @fontsource, セルフホスト** |
| **S1** | 実体 | 「具体的処置」「ミリ単位の調整」 | ❌ **具体的コード、解決手順** |

#### 判定ルール

1. **S3-S9**: 無料部分で公開可
2. **S5の数値実績**: 無料部分で公開可（権威性の根拠）
3. **S2以下**: 有料部分に隔離（具体的な技術名、コード、手順）

#### 例: Lighthouse記事の判定

| 要素 | スケール | 無料 | 有料 |
|:---|:---|:---|:---|
| 「99点達成」 | S5（指標） | ✅ 公開 | - |
| 「フォントの最適化」 | S3-S4（項目名） | ✅ 公開 | - |
| 「Google Fontsセルフホスト」 | S2（具体的技術） | ❌ 隠す | ✅ 有料 |
| 「`@fontsource/oswald/400.css`」 | S1（実装） | ❌ 隠す | ✅ 有料 |

---

### ステップ3: 無料部分のリファクタリング（抽象化）

**タスク**: S1-S2の具体的表現を、S5以上の抽象表現に変換します。

#### 言い換え辞書の適用

| 対象トピック | 無料（S3-S9）で使う表現 | 有料（S1-S2）で使う表現 |
|:---|:---|:---|
| **目標値** | 満点水準、高スコア、圧倒的数値 | ❌ Lighthouse 100点 |
| **技術要素** | 環境構築、コア技術、構成要素 | ❌ Vite設定、npmライブラリ実名、スキル |
| **改善手法** | 外部依存の解消、最適化、リソース管理 | ❌ Google Fontsセルフホスト、CSS preload削除 |
| **実装詳細** | クリティカルな記述、最小限のインライン化 | ❌ 200バイトのコード、具体的なTS/CSS記述 |
| **解決策** | 具体的アプローチ、アーキテクチャ | ❌ トラブルシュート手順、図解、構成図 |

#### リファクタリング例

**Before（具体的すぎる）:**

> フォント読み込み: -750ms
> JSバンドル: 257 kB → 260 kB に分割
>   - vendor-react: 201 kB
>   - vendor-remix: 51 kB
>   - vendor: 8 kB

**After（抽象化）:**

> 私はこの「構造的不自然さ」を解消するために、以下の3つの戦術を実行しました。
>
> - **外部依存の完全排除**: 外部CDNからのリソース読み込みを止め、ローカルでの制御下に置くことで大幅な遅延を短縮。
> - **レンダリング・ブロッキングの解消**: 競合していたリソース読み込み優先度を再定義し、描画遅延を84%削減。
> - **配信資産の最適化**: 共通基盤と個別ロジックを分離し、キャッシュ効率を最大化。
>
> その結果、Lighthouseで99点という、実用上の「完成形」に到達しました。

#### 重要: 数値実績は残す

権威性の根拠として、以下は**無料部分に残します**：

- ✅ 「94点から99点へ」
- ✅ 「LCP 1.5s達成」
- ✅ 「遅延84%削減」
- ✅ Before/Afterの比較（数値のみ）

#### 削除すべき内容

導入部から以下を**完全削除**します：

- ❌ 「開発の進捗」セクション（有料部分と完全重複）
- ❌ 「具体的なタスク」の詳細（Before/Current/Nextの繰り返し）
- ❌ 技術名称の羅列（Vite, @fontsource, layer2-commonなど）

---

### ステップ4: 有料部分のリファクタリング（具体化）

**タスク**: 無料部分で削除した具体的な内容を、有料部分で展開します。

#### 4-1: 重複の削除

有料部分から、無料部分で既に語られた内容を削除：

- ❌ 「開発の進捗」の Before/Current/Next（数値の繰り返し）
- ❌ 「具体的なタスク」の抽象的な説明部分

#### 4-2: 具体的な武器の追加

無料部分で抽象化した内容を、**実装可能なレベル**で展開：

**追加すべき内容:**

1. **実名の解禁**: Vite, @fontsource, layer2-common, preload
2. **実数値の提示**: 750ms, 470ms, 257 kB, 200バイト
3. **実コードの公開**:
   ```typescript
   import "@fontsource/oswald/400.css";
   { rel: "stylesheet", href: "style.css" }
   ```
4. **実手順の詳細**: ステップバイステップの実装ガイド

#### 4-3: 導入文の追加（無料→有料の橋渡し）

有料部分の冒頭に、以下のような導入文を追加：

> では、実際に私が記述したRemixの`links`関数の設定と、ViteによるJavaScript分割の具体的なコードを公開します。また、なぜ一般的な「CSSインライン化」が、今回のアーキテクチャでは毒になったのか。その検証データと、200バイトに絞り込んだ具体的なCSSの選定基準も解説します。

---

### ステップ5: 最終チェック

リファクタリング完了後、以下を確認します：

#### チェックリスト

- [ ] 無料部分に S1-S2 の具体的表現が残っていないか
- [ ] 無料部分の数値実績（権威性）は残っているか
- [ ] 無料部分と有料部分で同じ文章・表現が重複していないか
- [ ] 有料部分に具体的なコード・手順が含まれているか
- [ ] 無料→有料の移行がスムーズか（導入文があるか）

#### 検閲基準

無料部分を再度チェックし、以下の問いに答えます：

> 「この用語はS2以下か？」→ YES なら有料部分に移動

---

## 成果の切り出し（権威性を守る）

無料部分（S3-9）では、**「具体的な数字（Before/After）」**を権威性のエビデンスとして最大限に活用します。

| 項目 | 無料部分で出すべき「成果（WHAT）」 | 有料部分に隠すべき「詳細（HOW）」 |
|:---|:---|:---|
| **数値実績** | ✅ 「94点から99点へ」「LCP 1.5s達成」「遅延84%削減」 | ❌ 数値を出すための計測環境、検証回数、生データ |
| **改善項目** | ✅ 「フォントの最適化」「CSS配信の再設計」「JSの分割」 | ❌ `@fontsource`の設定、preload削除のコード、Viteのconfig |
| **判断基準** | ✅ 「100点より実用性を取った」という戦略 | ❌ 100点に届かなかった具体的な技術的理由と再現コード |

---

## まとめ: 権威性と秘匿性のバランス

スケール設計による、成果の扱い：

- **S5（指標）**: **改善後の数値（99点等）** は無料で公開 → 権威性の根拠
- **S3（主役）**: **「何をしたか（フォント最適化等）」** という項目名までは無料で公開
- **S2（要素）**: **「どの技術（ライブラリ名等）」** を使ったかは有料
- **S1（実体）**: **「どう書いたか（コード・手順）」** は有料

---

## リファクタリング実行時の注意

### 文体の維持

- ですます調を維持
- ClaudeMixとRemixはブランドとして前面に押し出す（汎用化しない）

### 横線の削除

blog-writerスキルで生成された記事には、セクション区切りに `---` が使われていますが、これは削除してください（Frontmatterとの区切り以外では使用しない）。

### 見出し構造の維持

- `### (h3)` から `##### (h5)` を使用
- 見出し階層を崩さない

---

**重要**: このスキルは、`blog-writer` スキルで執筆された記事を対象としています。新規記事の執筆には使用しないでください。
