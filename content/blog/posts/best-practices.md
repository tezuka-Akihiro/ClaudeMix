---
slug: "best-practices"
title: "Claude Code 公式ベストプラクティス：5つのレイヤーで構築する最強のAIパートナー"
description: "Claude Codeを使いこなすための最新公式ベストプラクティス。CLAUDE.md, Rules, Skills, Subagents, MCPsの5つのレイヤーを正しく使い分け、コンテキスト効率と自律性を最大化する構築手法を解説します。"
author: "ClaudeMix Team"
publishedAt: "2026-01-21"
category: "Claude Best Practices"
tags: ["CLAUDE.md", "rules", "Skills", "Subagent", "MCP"]
---

## 1. 5つのレイヤーの全体構造（関わり合いの俯瞰）

Claude Codeのカスタマイズは、AIの「脳（内部レイヤー）」と「手（外部レイヤー）」を分離して設計することで、AIの認知リソース（スタミナ）を最適化し、精度の高い出力を維持する**Context Engineering（コンテキスト工学）**の営みです。

| レイヤー | 分類 | 役割 (Role) | 関わり合いの性質 |
| : | : | : | : |
| **CLAUDE.md** | 内部 | **マスター設定** | 全てのレイヤーへのリンクを持つ「ハブ」 |
| **Rules** | 内部 | **ドメイン知識** | 特定の作業時のみ呼び出される「専門知識」 |
| **Skills** | 内部 | **作業手順** | 人とAIが協調する「ワークフロー」 |
| **Subagents** | 内部 | **自律実行** | メインコンテキストを汚さない「隔離作業員」 |
| **MCPs** | 外部 | **外部接続** | コードベース外から情報を供給する「手」 |

## 2. 各レイヤーの詳細な関わり合い

### ① CLAUDE.md：全レイヤーの「インデックス」

CLAUDE.mdはセッション開始時に必ず読み込まれる唯一のファイルです。

- **ハブ機能**: 300行以内で「WHAT/WHY/HOW」を記述し、詳細はRulesやSkillsへポインタ（参照）を飛ばす役割を担います。
- **相互作用**: Claudeが最初にCLAUDE.mdを読むことで、「このプロジェクトにはどんなRulesがあり、どのSubagentを使うべきか」という全体戦略を立てられるようになります。

### ② Rules：コンテキストの「動的フィルタ」

`.claude/rules/` に配置され、パスベース（YAMLフロントマター）で発動します。

- **相互作用の最適化**: 例えば「DBの命名規則」というRulesは、SQLファイルを触る時だけ読み込まれます。
- **利点**: 無関係な知識（CSSの知識など）が混ざるのを防ぎ、AIの注意力を「今やるべきこと」に集中させます。

### ③ Skills：対話型「ワークフロー」

ユーザーが `/` コマンドで起動する、反復可能なマルチステップの手順です。

- **人との関わり**: アーキテクチャの決定など、実行途中で「ユーザーの承認や判断」が必要な場合に最適です。
- **Rulesとの連携**: Skillの実行プロセスの中で、特定のRulesを参照して品質を担保させることができます。

### ④ Subagents：コンテキストの「隔離・節約」

Claudeが自動で、あるいは指示により起動する独立した専門アシスタントです。

- **相互作用の隔離**: 大規模な検索やリファクタリングなど、大量のログが出る作業を「別ウィンドウ（コンテキスト）」で実行させます。
- **利点**: 作業完了後に「結果だけ」をメインセッションに持ち帰るため、メインエージェントの記憶（コンテキスト）が汚れるのを防ぎます。

### ⑤ MCPs：外部情報の「供給源」

GitHub、Slack、データベースなどの外部ツールへの接続口です。

- **情報の橋渡し**: MCPを通じて取得した外部データ（例：Sentryのエラーログ）を元に、Rulesに従ってSubagentsが修正を行う、という高度な連携が可能です。

## 3. 「防衛拠点」構築のための決定フロー

どのレイヤーに定義すべきか迷った際は、以下の問いに沿って配置を決定します。

1. **「常に守るべき共通の地図か？」**
   → `CLAUDE.md` (プロジェクト概要、コアファイル構成)
2. **「特定のファイルに関わる深い専門知識か？」**
   → `Rules` (デザインシステム、セキュリティ要件、DBパターン)
3. **「人がトリガーする繰り返し作業か？」**
   → `Skills` (新規ページ作成、デプロイチェック)
4. **「自動で任せたい重い自律タスクか？」**
   → `Subagents` (セキュリティ監査、大規模リファクタリング)
5. **「コードベース外（GitHub/Slack等）に触れるか？」**
   → `MCPs` (Issue管理、監視データ取得、通知)

## 4. 段階的な構築アプローチ (Strategy)

いきなり全てを作るのではなく、以下の順で「製造ライン」を整備します。

1. **Step 1**: `CLAUDE.md` で地図を作り、AIに「今どこにいるか」を教える。
2. **Step 2**: 重要なドメイン知識（優作さんの延命術など）を `Rules` に分離し、AIの脳を整理する。
3. **Step 3**: 週に数回やるルーチンを `Skills` にしてスラッシュコマンド化する。
4. **Step 4**: 重い作業が発生したら `Subagents` に切り出し、メインのコンテキストを清潔に保つ。

## 5 📘 Claude Code 5つのレイヤー活用ガイド

- [**Project Master (CLAUDE.md)**](/blog/claudemd-guide)
  **役割：プロジェクトの地図と思想**
  セッション開始時に必ず読み込まれる「脳」の基盤。WHY（なぜやるか）を定義し、AIの判断軸を固定します。

- [**Domain Rules (.claude/rules)**](/blog/rules-guide)
  **役割：専門知識の動的フィルタリング**
  特定のディレクトリやファイル操作時のみ発動する「法律」。無関係な知識でコンテキストを汚さず、精度を最大化します。

- [**Agent Skills (.claude/skills)**](/blog/skills-guide)
  **役割：対話型ワークフロー**
  人間がトリガーして開始する「反復手順」。アーキテクチャの決定など、人とAIが対話しながら進める共同作業を定式化します。

- [**Sub-agents (Autonomous Task)**](/blog/subagents-guide)
  **役割：自律型の隔離作業員**
  メインの会話（コンテキスト）から切り離された「別動隊」。重いリファクタリングや調査を任せ、AIのスタミナ切れを防ぎます。

- [**MCP Connections (External Tools)**](/blog/mcp-guide)
  **役割：外部世界への拡張（手）**
  GitHubやDB、Slackなど、コードベースの外側にある情報を供給。他のレイヤーと連携し、真の自律稼働を実現します。

**参照元**:

- [1] izanami.dev - [CLAUDE.md や AGENTS.md のベストプラクティス](https://izanami.dev/post/47b08b5a-6e1c-4fb0-8342-06b8e627450a)
- [2] izanami.dev - [Claude Code 5つのレイヤー使い分け](https://izanami.dev/post/47deb6b9-0965-41e7-b128-12f5937e8748)
