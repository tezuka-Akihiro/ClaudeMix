---
slug: "cloudflare-pages-deployment-challenge"
title: "Cloudflare Pages ãƒ‡ãƒ—ãƒ­ã‚¤ã®æŒ‘æˆ¦: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜ã‹ã‚‰ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ã¸"
description: "Remixã‚¢ãƒ—ãƒªã‚’Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éç¨‹ã§é­é‡ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ éäº’æ›ã®å•é¡Œã‚’ã€ã€Œãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ã€ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§è§£æ±ºã™ã‚‹å…¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨˜éŒ²ã€‚ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã®åˆ¶ç´„ã‚’ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã®æ©Ÿä¼šã«å¤‰ãˆã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã‚’è§£èª¬ã—ã¾ã™ã€‚"
author: "ClaudeMix Team"
publishedAt: "2025-11-20"
category: "Tutorials & Use Cases"
tags: ["Workers", "Vite", "troubleshooting"]
---

## ã¯ã˜ã‚ã«

### Remixã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã“ã‚“ãªã“ã¨ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ

æœ€æ–°ã®Remixã‚¢ãƒ—ãƒªã‚’Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã†ã¨ã—ãŸã€‚
ã—ã‹ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯å•é¡Œãªãå‹•ãã®ã«ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒãªã„ã€ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã€é€”æ–¹ã«æš®ã‚Œã¦ã—ã¾ã£ãŸã€‚
ãªã‚“ã¨ã‹å›é¿ç­–ã‚’è¦‹ã¤ã‘ã¦ã‚‚ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè½ã¡ãŸã‚Šã€æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚ŒãŸã‚Šã—ã¦ã€æ ¹æœ¬çš„ãªè§£æ±ºã«ã¯ãªã‚‰ãªã‹ã£ãŸã€‚

### ã“ã®è¨˜äº‹ã‚’ãŠå‹§ã‚ã—ãªã„äºº

- ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‘ã°ãã‚Œã§ååˆ†ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã®åˆ¶ç´„ãªã©æ°—ã«ã—ãªã„äººã€‚
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã®ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒãªã„ã€ã¨ã„ã†åˆ¶ç´„ã¯ã€å˜ãªã‚‹ä¸ä¾¿ã§ã—ã‹ãªã„ã¨è€ƒãˆã‚‹äººã€‚
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚ˆã‚Šã‚‚ã€æ‰‹è»½ãªé–‹ç™ºæ‰‹æ³•ã‚’å„ªå…ˆã—ãŸã„äººã€‚

ã‚‚ã—ä¸€ã¤ã§ã‚‚å½“ã¦ã¯ã¾ã‚‰ãªã„ãªã‚‰ã€èª­ã¿é€²ã‚ã‚‹ä¾¡å€¤ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### ã“ã®ã¾ã¾ã§ã¯å±é™ºã§ã™

ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®ã¿å‹•ä½œç¢ºèªã‚’ç¶šã‘ã€ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã®åˆ¶ç´„ã‚’è»½è¦–ã™ã‚‹ã“ã¨ã§ã€ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã«ã¯ã€Œè¦‹ãˆãªã„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒªã‚¹ã‚¯ã€ãŒé™ã‹ã«è“„ç©ã•ã‚Œã¦ã„ãã¾ã™ã€‚
ã‚„ãŒã¦ã€æœ¬ç•ªç’°å¢ƒã§äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„çŠ¶æ…‹ã«é™¥ã‚‹ã§ã—ã‚‡ã†ã€‚
ã¤ã„ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¨ãƒ©ãƒ¼ã«è€ãˆãã‚Œãšé›¢è„±ã—ã€ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã¯ã€Œå‹•ã‹ãªã„ã€ã¨ã„ã†è©•åˆ¤ã ã‘ãŒæ®‹ã‚Šã€èª°ã‚‚ä½¿ã‚ãªã„"ãƒ‡ã‚¸ã‚¿ãƒ«å»ƒå¢Ÿ"ã¨åŒ–ã™ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### ã“ã‚“ãªæœªæ¥ãŒæ‰‹ã«å…¥ã‚Šã¾ã™

ã“ã®è¨˜äº‹ã‚’èª­ã‚ã°ã€Cloudflare Pagesã®åˆ¶ç´„ã‚’é€†æ‰‹ã«å–ã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹è¨­è¨ˆæ€æƒ³ãŒæ‰‹ã«å…¥ã‚Šã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ä¾å­˜ã—ãªã„ã€Œãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ã€ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã€Remixã‚¢ãƒ—ãƒªã‚’Cloudflare Pagesã«å®‰å®šã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹**è¨­è¨ˆå›³**ã‚’æ‰‹ã«å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚
ã“ã®æ–¹æ³•ã¯ã€æœºä¸Šã®ç©ºè«–ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ã•ã«**ã“ã®ãƒ–ãƒ­ã‚°è‡ªèº«ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã—ã¦å®Ÿè¨¼æ¸ˆã¿**ã§ã™ã€‚
ã“ã®æƒ…å ±ã¯ã€å˜ãªã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã§ã¯ãªãã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã®åˆ¶ç´„ã‚’ã€Œæœ€é©åŒ–ã®æ©Ÿä¼šã€ã«å¤‰ãˆã‚‹**æœªæ¥ã®é–‹ç™ºç¾å ´ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸä¸€æ¬¡æƒ…å ±**ã§ã™ã€‚

### ç§ã‚‚åŒã˜ã§ã—ãŸ

ç­†è€…ã‚‚éå»ã«åŒã˜ãƒ‡ãƒ—ãƒ­ã‚¤å•é¡Œã§æ‚©ã¿æŠœãã€ã“ã®ãƒ–ãƒ­ã‚°ã‚’ã€ŒAIã«ã‚ˆã‚‹å®Ÿè£…ã€ã¨ã€Œäººé–“ã«ã‚ˆã‚‹è¨­è¨ˆã€ã§ä½œã‚Šä¸Šã’ã‚‹éç¨‹ã§ã“ã®è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹ã§ã€Cloudflare Pagesã®åˆ¶ç´„ã‚’ç†è§£ã—ã€å®‰å®šã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã¨ã€æ˜æ—¥ã‹ã‚‰è©¦ã›ã‚‹Tipsã‚’æŒã¡å¸°ã‚Œã‚‹ã‚ˆã†ã«æ›¸ãã¾ã—ãŸã€‚
ã•ã‚‰ã«æ·±æ˜ã‚Šã—ã¦ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã«æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ãã®è©³ç´°ãªå®Ÿè£…æ–¹æ³•ã‚’ç¢ºèªã§ãã¾ã™ã€‚

## ğŸ“ æ¦‚è¦

Remix v2 + Viteã§æ§‹ç¯‰ã—ãŸãƒ–ãƒ­ã‚°ã‚¢ãƒ—ãƒªã‚’Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éç¨‹ã§ã€CSSã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã‹ã‚‰å§‹ã¾ã‚Šã€æœ€çµ‚çš„ã«Cloudflareç’°å¢ƒã®**ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâ€»ï¼‰éäº’æ›**ã¨ã„ã†å¤§ããªå£ã«çªãå½“ãŸã‚Šã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€ãã‚Œã‚‰ã®å•é¡Œã‚’ç‰¹å®šã—ã€è§£æ±ºç­–ã¨ã—ã¦**ã€Œãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒãƒ³ãƒ‰ãƒ«ï¼ˆâ€»ï¼‰ã™ã‚‹ã€**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸æŠã—ã€å®Ÿè£…ã™ã‚‹ã¾ã§ã®å…¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’è©³ç´°ã«è¨˜éŒ²ã—ã¾ã™ã€‚

> â€» **ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ **: ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: `my-document.txt`ï¼‰ã‚’ä¿å­˜ã—ãŸã‚Šèª­ã¿è¾¼ã‚“ã ã‚Šã™ã‚‹ä»•çµ„ã¿ã€‚
> â€» **ãƒãƒ³ãƒ‰ãƒ«**: è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’1ã¤ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã€‚Webã‚µã‚¤ãƒˆã®è¡¨ç¤ºã‚’é€Ÿãã™ã‚‹ãŸã‚ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚

### ç™ºç”Ÿç’°å¢ƒ

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Remix v2
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Cloudflare Pages/Workers
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite

---

## âš ï¸ å•é¡Œã®ç™ºè¦‹ã¨ç—‡çŠ¶

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯å•é¡Œãªãå‹•ä½œã™ã‚‹ãƒ–ãƒ­ã‚°ã‚¢ãƒ—ãƒªãŒã€Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ã§è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã—ãŸã€‚

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**

```bash
Could not resolve "fs"
Could not resolve "path"
Could not resolve "stream"
Could not resolve "crypto"
```

**ç—‡çŠ¶:**

- ãƒ–ãƒ­ã‚°è¨˜äº‹ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨500ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯å†ç¾ã›ãšã€ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ã®ã¿ç™ºç”Ÿã™ã‚‹ã€‚

---

## ğŸ” èª¿æŸ»ã¨è©¦è¡ŒéŒ¯èª¤ã®ãƒ—ãƒ­ã‚»ã‚¹

ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¨ãƒ©ãƒ¼ã®æ ¹æœ¬åŸå› ã«ãŸã©ã‚Šç€ãã¾ã§ã«ã€CSSã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚„SSRï¼ˆâ€»ï¼‰è¨­å®šã®ä¸å‚™ã¨ã„ã£ãŸã„ãã¤ã‹ã®å•é¡Œã‚’æ®µéšçš„ã«è§£æ±ºã—ã¾ã—ãŸã€‚

> â€» **SSR (ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°)**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒšãƒ¼ã‚¸ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ãŸã³ã«ã€ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦è¿”ã™ä»•çµ„ã¿ã€‚

ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’ä¿®æ­£ã—ã¦ã‚‚ã€ä»Šåº¦ã¯`Could not resolve "fs"`ã®ã‚ˆã†ãªã€Node.jsï¼ˆâ€»ï¼‰ç’°å¢ƒã«ç‰¹æœ‰ã®APIãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ç›´é¢ã—ã¾ã—ãŸã€‚

> â€» **Node.js**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§JavaScriptã‚’å‹•ã‹ã™ãŸã‚ã®ç’°å¢ƒã€‚å¤šãã®é–‹ç™ºãƒ„ãƒ¼ãƒ«ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’èª¿æŸ»ã—ãŸã¨ã“ã‚ã€**ãƒ–ãƒ­ã‚°è¨˜äº‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€å‡¦ç†ãªã©ã€20ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ç›´æ¥èª­ã¿æ›¸ãã™ã‚‹ã‚³ãƒ¼ãƒ‰ï¼ˆ`fs/promises`ï¼‰ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹**ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ 'fs/promises' ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
$ grep -r "fs/promises" app/ --include="*.ts" --include="*.tsx"
# çµæœ: 20ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ 'fs/promises' ã‚’ä½¿ç”¨
```

---

## ğŸ’¡ æ ¹æœ¬åŸå› ã®ç‰¹å®š

èª¿æŸ»ã®çµæœã€**Cloudflare Workers/Pagesã®å®Ÿè¡Œç’°å¢ƒã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ä¸€åˆ‡ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„**ã¨ã„ã†åˆ¶ç´„ãŒæ ¹æœ¬åŸå› ã§ã‚ã‚‹ã¨ç‰¹å®šã—ã¾ã—ãŸã€‚

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯è‡ªç”±ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã™ãŒã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã§ã¯ãã®ã€Œå¸¸è­˜ã€ãŒé€šç”¨ã—ãªã‹ã£ãŸã®ã§ã™ã€‚

---

## ğŸ”§ è§£æ±ºç­–

ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒä½¿ãˆãªã„ã¨ã„ã†åˆ¶ç´„ã‚’ä¹—ã‚Šè¶Šãˆã‚‹ãŸã‚ã€**ã€Œãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ã€**ã¨ã„ã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚ã“ã‚Œã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã®ã§ã¯ãªãã€**ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ®µéšã§ã‚ã‚‰ã‹ã˜ã‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã‚³ãƒ¼ãƒ‰ã«åŸ‹ã‚è¾¼ã‚“ã§ã—ã¾ã†**æ–¹æ³•ã§ã™ã€‚

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤‰æ›´:**

```plaintext
Before (å®Ÿè¡Œæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€):
User Request â†’ SSR â†’ fs.readFile(".../post.md") â†’ HTML

After (ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŸ‹ã‚è¾¼ã‚€):
Build Time: ".../post.md" â†’ JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¤‰æ›
User Request â†’ SSR â†’ import(module) â†’ HTML
```

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã€ãƒ“ãƒ«ãƒ‰å‰ã«Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§TypeScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚

```javascript
// scripts/prebuild/generate-blog-posts.js
import fs from 'fs/promises';
import path from 'path';
import matter from 'gray-matter';

async function generateBlogPosts() {
  const postsDir = 'content/blog/posts';
  const files = await fs.readdir(postsDir);

  const posts = await Promise.all(
    files
      .filter(file => file.endsWith('.md'))
      .map(async (file) => {
        const content = await fs.readFile(path.join(postsDir, file), 'utf-8');
        const { data, content: markdown } = matter(content);
        return { slug: file.replace('.md', ''), frontmatter: data, content: markdown };
      })
  );

  // TypeScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
  const output = `
    // Auto-generated by prebuild script. Do not edit.
    export const posts = ${JSON.stringify(posts, null, 2)};
  `;

  await fs.mkdir('app/generated', { recursive: true });
  await fs.writeFile('app/generated/blog-posts.ts', output);
  console.log(`âœ… Generated ${posts.length} blog posts`);
}

generateBlogPosts();
```

ãã—ã¦ã€`package.json`ã®ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚’ä¿®æ­£ã—ã€`remix vite:build`ã®å‰ã«ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

## ğŸ’¡ è§£æ±ºç­–ã®é¸æŠ

### æ¤œè¨ã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### âŒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Vercel/Netlify ã¸ã®ç§»è¡Œ

- **ãƒ¡ãƒªãƒƒãƒˆ**: ã‚³ãƒ¼ãƒ‰å¤‰æ›´ä¸è¦
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: Cloudflare Pages ã‚’è«¦ã‚ã‚‹

#### âŒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Cloudflare KV/R2 ã¸ã®ç§»è¡Œ

- **ãƒ¡ãƒªãƒƒãƒˆ**: Cloudflare ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å†…ã§å®Œçµ
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: å¤§è¦æ¨¡ãªã‚³ãƒ¼ãƒ‰æ›¸ãæ›ãˆã€ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã®è¤‡é›‘åŒ–

#### âœ… ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ï¼ˆæ¡ç”¨ï¼‰

- **ãƒ¡ãƒªãƒƒãƒˆ**:
  - ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼ˆäº‹å‰å‡¦ç†æ¸ˆã¿ï¼‰
  - Git ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ç›¸æ€§ãŒè‰¯ã„
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
  - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°æ™‚ã«å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦
  - å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¿½åŠ ã«ã¯ä¸å‘ã

**æ¡ç”¨ç†ç”±:**
ã€ŒGit ã§ç®¡ç†ã—ã¦æ›´æ–°æ™‚ã«å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§å•é¡Œãªã„ã€ã¨ã„ã†è¦ä»¶ã«ãƒãƒƒãƒ

## ğŸ”§ å®Ÿè£…è¨ˆç”»

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´

```text
Before (ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  FS ã‚¢ã‚¯ã‚»ã‚¹):
User Request â†’ SSR â†’ fs.readFile() â†’ Markdown â†’ HTML

After (ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«):
Build Time: Markdown â†’ JavaScript Module
User Request â†’ SSR â†’ Import Module â†’ HTML
```

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ

```javascript
// scripts/prebuild/generate-blog-posts.js
import fs from 'fs/promises';
import path from 'path';
import matter from 'gray-matter';

async function generateBlogPosts() {
  const postsDir = 'content/blog/posts';
  const files = await fs.readdir(postsDir);

  const posts = await Promise.all(
    files
      .filter(file => file.endsWith('.md'))
      .map(async (file) => {
        const content = await fs.readFile(
          path.join(postsDir, file),
          'utf-8'
        );
        const { data, content: markdown } = matter(content);

        return {
          slug: file.replace('.md', ''),
          frontmatter: data,
          content: markdown,
        };
      })
  );

  // TypeScript ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å‡ºåŠ›
  const output = `
// Auto-generated by prebuild script
// Do not edit manually

export interface BlogPost {
  slug: string;
  frontmatter: {
    title: string;
    publishedAt: string;
    summary: string;
    author?: string;
    tags?: string[];
  };
  content: string;
}

export const posts: BlogPost[] = ${JSON.stringify(posts, null, 2)};

export function getPostBySlug(slug: string): BlogPost | undefined {
  return posts.find(post => post.slug === slug);
}

export function getAllPosts(): BlogPost[] {
  return posts.sort((a, b) =>
    new Date(b.frontmatter.publishedAt).getTime() -
    new Date(a.frontmatter.publishedAt).getTime()
  );
}
`;

  await fs.mkdir('app/generated', { recursive: true });
  await fs.writeFile('app/generated/blog-posts.ts', output);

  console.log(`âœ… Generated ${posts.length} blog posts`);
}

generateBlogPosts().catch(console.error);
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã®æ›¸ãæ›ãˆ

```typescript
// âŒ Before: app/data-io/blog/posts/fetchPosts.server.ts
import fs from 'fs/promises';
import matter from 'gray-matter';

export async function fetchPosts() {
  const files = await fs.readdir('content/blog/posts');
  const posts = await Promise.all(
    files.map(async (file) => {
      const content = await fs.readFile(`content/blog/posts/${file}`, 'utf-8');
      return matter(content);
    })
  );
  return posts;
}

// âœ… After: app/data-io/blog/posts/fetchPosts.server.ts
import { getAllPosts } from '~/generated/blog-posts';

export function fetchPosts() {
  return getAllPosts();
}
```

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

| æŒ‡æ¨™ | Before (FS) | After (Bundle) | æ”¹å–„ |
| ------ | ------------- | ---------------- | ------ |
| è¨˜äº‹èª­ã¿è¾¼ã¿ | ~10-50ms | ~1ms | **10-50x** |
| ã‚µãƒ¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ« | 177 kB | 33 kB + ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | å¤‰å‹• |
| ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ | é…ã„ | é€Ÿã„ | âœ… |

### ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•

**ãƒ¡ãƒªãƒƒãƒˆ:**

- âœ… ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
- âœ… Cloudflare Workers äº’æ›
- âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä¿¡é ¼æ€§å‘ä¸Š
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä¸è¦ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼æ¤œå‡ºï¼‰

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**

- âŒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°æ™‚ã«å†ãƒ“ãƒ«ãƒ‰å¿…è¦
- âŒ ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®å¢—åŠ ï¼ˆ+æ•°ç§’ï¼‰
- âŒ å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¿½åŠ ã«ã¯ä¸å‘ã

## ğŸ” å­¦ã‚“ã ã“ã¨ï¼ˆç¾æ™‚ç‚¹ï¼‰

### 1. Cloudflare Workers ã®åˆ¶ç´„ç†è§£

**V8 Isolate ã®ç‰¹æ€§:**

- ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãªã—
- Node.js API ã®é™å®šçš„ã‚µãƒãƒ¼ãƒˆ
- ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹å®Ÿè¡Œç’°å¢ƒ

**æ•™è¨“**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã§ã¯ã€å¾“æ¥ã®ã‚µãƒ¼ãƒãƒ¼ã®å¸¸è­˜ãŒé€šç”¨ã—ãªã„

### 2. ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®é€²åŒ–

**Vite ã®å¼·åŠ›ã•:**

- ãƒ“ãƒ«ãƒ‰æ™‚å‡¦ç†ã®æŸ”è»Ÿæ€§
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ 
- é«˜é€Ÿãªãƒ“ãƒ«ãƒ‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

**Remix ã®é©å¿œæ€§:**

- è¤‡æ•°ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚µãƒãƒ¼ãƒˆï¼ˆNode.js, Cloudflare, Denoï¼‰
- ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹æŸ”è»Ÿæ€§

### 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é¸æŠåŸºæº–

**é‡è¦ãªè³ªå•:**

- âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯é™çš„ã‹å‹•çš„ã‹ï¼Ÿ
- âœ… æ›´æ–°é »åº¦ã¯ï¼Ÿ
- âœ… ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®åˆ¶ç´„ã¯ï¼Ÿ
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã¯ï¼Ÿ

**ä»Šå›ã®ã‚±ãƒ¼ã‚¹:**

- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„: é™çš„ï¼ˆMarkdown in Gitï¼‰
- æ›´æ–°é »åº¦: ä½ã€œä¸­ï¼ˆé€±æ•°å›ï¼‰
- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ : Cloudflare Workersï¼ˆåˆ¶ç´„ã‚ã‚Šï¼‰
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹é‡è¦–

â†’ **ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ãŒæœ€é©è§£**

## ğŸ“ ä½œæ¥­å¾Œã®å­¦ã³ï¼ˆå®Ÿè£…å®Œäº†ï¼ï¼‰

**âœ¨ å®Ÿè£…ãŒå®Œäº†ã—ã€Cloudflare Pages ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«æˆåŠŸã—ã¾ã—ãŸï¼**

### å®Ÿè£…ä¸­ã«ç™ºè¦‹ã—ãŸå•é¡Œ

#### äºˆæƒ³å¤–ã«é †èª¿ã ã£ãŸå®Ÿè£…

åŸºæœ¬çš„ãªå®Ÿè£…ã¯æ¥µã‚ã¦ã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã¿ã¾ã—ãŸã€‚è¨ˆç”»æ®µéšã§ã®ç¶¿å¯†ãªè¨­è¨ˆã¨ã€æ˜ç¢ºãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡ãŒåŠŸã‚’å¥ã—ãŸå½¢ã§ã™ã€‚

- âœ… ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å«ã‚ã¦å•é¡Œãªãå‹•ä½œ
- âœ… å‹å®šç¾©ã®æ•´åˆæ€§: æ—¢å­˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã®å®Œå…¨ãªäº’æ›æ€§ã‚’ç¶­æŒ
- âš ï¸ ãƒ†ã‚¹ãƒˆã®æ›¸ãæ›ãˆ: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä¸å¤‰ã®ãŸã‚ã€ãƒ¢ãƒƒã‚¯æˆ¦ç•¥ã®ã¿èª¿æ•´ãŒå¿…è¦ï¼ˆä»Šå¾Œå¯¾å¿œï¼‰

#### ãƒ•ã‚§ãƒ¼ã‚º5: ESM/CommonJS äº’æ›æ€§å•é¡Œï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ç™ºè¦‹ï¼‰

ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«äºˆæœŸã—ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸï¼š

```text
âœ˜ [ERROR] No matching export in "htmlparser2" for import "default"
âœ˜ [ERROR] No matching export in "is-plain-object" for import "default"
```

**åŸå› :**

- `sanitize-html` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ãŒ ESM å°‚ç”¨
- Vite ãŒ CommonJS ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãƒãƒ³ãƒ‰ãƒ«ã—ã‚ˆã†ã¨ã—ãŸ
- Cloudflare Workers ç’°å¢ƒã§ã¯ç‰¹å®šã®è§£æ±ºæ¡ä»¶ãŒå¿…è¦

**è§£æ±ºç­–:**

```typescript
// vite.config.ts
ssr: {
  noExternal: true, // ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã‚’ãƒãƒ³ãƒ‰ãƒ«
  resolve: {
    conditions: ["worker", "browser"], // Workerç’°å¢ƒç”¨ã®è§£æ±ºæ¡ä»¶
    externalConditions: ["worker", "browser"],
  },
}
```

**çµæœ:**
âœ… Pages Functions ã®ãƒãƒ³ãƒ‰ãƒ«ãŒæˆåŠŸ
âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šçµæœ

#### ãƒ“ãƒ«ãƒ‰æ™‚é–“

```bash
ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: ~1ç§’æœªæº€
  â”œâ”€ 12è¨˜äº‹ã®è§£æã¨ç”Ÿæˆ
  â”œâ”€ 3ã‚«ãƒ†ã‚´ãƒªã®èª­ã¿è¾¼ã¿
  â””â”€ TypeScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç”Ÿæˆ

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ“ãƒ«ãƒ‰: 2.01ç§’
SSRãƒ“ãƒ«ãƒ‰: 365ms
åˆè¨ˆãƒ“ãƒ«ãƒ‰æ™‚é–“: ç´„2.5ç§’
```

### ã‚µãƒ¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º

| é …ç›® | Before | After | å¤‰åŒ– |
| ------ | -------- | ------- | ------ |
| ã‚µãƒ¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ« (FSç‰ˆ) | 33.30 kB | - | - |
| ã‚µãƒ¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ« (Bundleç‰ˆ) | - | 204.75 kB | +171.45 kB |

ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¯å¢—åŠ ã—ã¾ã—ãŸãŒã€ã“ã‚Œã¯12è¨˜äº‹åˆ†ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨å…¨ä¾å­˜é–¢ä¿‚ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

### å®Ÿè¡Œæ™‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆæ¨å®šï¼‰

| æŒ‡æ¨™ | Before (FS) | After (Bundle) | æ”¹å–„ç‡ |
| ------ | ------------- | ---------------- | -------- |
| è¨˜äº‹ä¸€è¦§å–å¾— | ~10-50ms | ~1ms | **10-50x** |
| è¨˜äº‹è©³ç´°å–å¾— | ~5-20ms | ~0.5ms | **10-40x** |
| ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ | é…ã„ | é€Ÿã„ | âœ… å¤§å¹…æ”¹å–„ |

### Cloudflare Pages ã§ã®å‹•ä½œç¢ºèª

âœ… ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
âœ… ãƒ–ãƒ­ã‚°ä¸€è¦§ãƒšãƒ¼ã‚¸æ­£å¸¸è¡¨ç¤º
âœ… å€‹åˆ¥è¨˜äº‹ãƒšãƒ¼ã‚¸æ­£å¸¸è¡¨ç¤º
âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ãªã—

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### 1. ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ§‹é€ 

```javascript
// âœ… Good: ESMå½¢å¼ã€æ˜ç¢ºãªé–¢æ•°åˆ†å‰²ã€è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›
async function generateBlogPosts() {
  console.log('ğŸš€ Starting blog posts generation...');

  // 1. å…¥åŠ›ã®èª­ã¿è¾¼ã¿
  const files = await fs.readdir(postsDir);
  console.log(`ğŸ“ Found ${files.length} markdown files`);

  // 2. ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›
  const posts = await Promise.all(files.map(parsePost));
  console.log(`âœ… Parsed ${posts.length} posts`);

  // 3. å‡ºåŠ›ã®ç”Ÿæˆ
  const output = generateTypeScriptModule(posts);

  // 4. ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿
  await fs.writeFile(outputPath, output);
  console.log(`âœ… Generated ${outputPath}`);
}
```

#### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

```javascript
// âœ… Good: ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡º
if (!data.title || typeof data.title !== 'string') {
  throw new Error(`Invalid frontmatter in ${file}: missing or invalid 'title'`);
}
```

ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ã§ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’é˜²æ­¢ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å•é¡Œã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚

#### 3. å‹å®‰å…¨æ€§ã®ç¢ºä¿

```typescript
// âœ… Good: å®Œå…¨ãªå‹å®šç¾©ã‚’ç”Ÿæˆ
export interface BlogPost {
  slug: string;
  frontmatter: BlogPostFrontmatter;
  content: string;
}

export const posts: BlogPost[] = [/* ... */];
```

ç”Ÿæˆã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å®Œå…¨ãªå‹æƒ…å ±ã‚’æŒã¤ãŸã‚ã€IDEã®è£œå®Œã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å‹ãƒã‚§ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ã¾ã™ã€‚

#### 4. CI/CD ã¨ã®çµ±åˆ

```json
{
  "scripts": {
    "prebuild": "node scripts/prebuild/generate-blog-posts.js",
    "build": "npm run prebuild && remix vite:build"
  }
}
```

`prebuild` ã‚’ `build` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‰ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€CI/CDç’°å¢ƒã§ã‚‚è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

#### 5. Vite SSR è¨­å®šã®é‡è¦æ€§

```typescript
// âœ… Cloudflare Workers ç”¨ã®æœ€é©ãªè¨­å®š
ssr: {
  noExternal: true, // ã™ã¹ã¦ãƒãƒ³ãƒ‰ãƒ«
  resolve: {
    conditions: ["worker", "browser"], // ç’°å¢ƒã«å¿œã˜ãŸè§£æ±º
  },
}
```

### ãƒãƒã£ãŸãƒã‚¤ãƒ³ãƒˆ

#### 1. ESM/CommonJS äº’æ›æ€§å•é¡Œ

ã“ã‚ŒãŒå”¯ä¸€ã®äºˆæœŸã—ãªã„å•é¡Œã§ã—ãŸã€‚

- **å•é¡Œ**: ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã« `htmlparser2` ã¨ `is-plain-object` ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼
- **åŸå› **: ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ ESM å°‚ç”¨ã§ã€Vite ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯æ­£ã—ããƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„
- **è§£æ±º**: `ssr.resolve.conditions` ã§ Worker ç’°å¢ƒç”¨ã®æ¡ä»¶ã‚’æŒ‡å®š
- **æ•™è¨“**: Cloudflare Workers ã§ã¯ã€ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã‚’æ­£ã—ããƒãƒ³ãƒ‰ãƒ«ã™ã‚‹è¨­å®šãŒå¿…è¦

#### 2. åŸºæœ¬å®Ÿè£…ãŒã‚¹ãƒ ãƒ¼ã‚ºã ã£ãŸç†ç”±

ãƒãƒã£ãŸãƒã‚¤ãƒ³ãƒˆãŒå°‘ãªã‹ã£ãŸã®ã¯ã€ä»¥ä¸‹ã®è¦å› ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™:

1. **äº‹å‰ã®å¾¹åº•çš„ãªèª¿æŸ»**: Cloudflare Workers ã®åˆ¶ç´„ã‚’å®Œå…¨ã«ç†è§£ã—ã¦ã‹ã‚‰å®Ÿè£…ã«ç€æ‰‹
2. **æ˜ç¢ºãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨ˆç”»**: ãƒ–ãƒ­ã‚°è¨˜äº‹ã®å®Ÿè£…è¨ˆç”»ãŒè©³ç´°ã ã£ãŸ
3. **æ®µéšçš„ãªå®Ÿè£…**: ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ â†’ ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ â†’ ãƒ†ã‚¹ãƒˆã®é †ã§æ®µéšçš„ã«é€²è¡Œ
4. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç†è§£**: ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã®æ§‹é€ ã‚’å®Œå…¨ã«æŠŠæ¡ã—ã¦ã‹ã‚‰ç€æ‰‹

### é‡è¦ãªç™ºè¦‹: ã€Œåˆ¶ç´„ã€ãŒã€Œæœ€é©åŒ–ã€ã«å¤‰ã‚ã‚‹ç¬é–“

ä»Šå›ã®å®Ÿè£…ã§æœ€ã‚‚é‡è¦ãªå­¦ã³ã¯ã€**Cloudflare Workers ã®ã€Œåˆ¶ç´„ã€ãŒã€çµæœçš„ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ãŸ**ã¨ã„ã†ç‚¹ã§ã™ã€‚

- ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒä½¿ãˆãªã„ã¨ã„ã†ã€Œåˆ¶ç´„ã€
- â†’ ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«ã¨ã„ã†ã€Œæœ€é©åŒ–ã€
- â†’ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®åŠ‡çš„å‘ä¸Šï¼ˆ10-50å€é€Ÿï¼‰

ã“ã‚Œã¯ã€ç¾ä»£ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã‘ã‚‹é‡è¦ãªæ•™è¨“ã§ã™:

> **åˆ¶ç´„ã¯å‰µé€ æ€§ã‚’ç”Ÿã¿ã€æœ€é©åŒ–ã®æ©Ÿä¼šã¨ãªã‚‹**

## ğŸ¯ ã¾ã¨ã‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒã®åˆ¶ç´„ã‚’ç†è§£ã™ã‚‹**
   - Cloudflare Workers â‰  Node.js ã‚µãƒ¼ãƒãƒ¼
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ä¾å­˜ã¯ NG

2. **ãƒ“ãƒ«ãƒ‰æ™‚å‡¦ç†ã‚’æ´»ç”¨ã™ã‚‹**
   - é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒãƒ³ãƒ‰ãƒ«
   - ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®è² è·ã‚’æ¸›ã‚‰ã™

3. **é©åˆ‡ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’é¸æŠã™ã‚‹**
   - è¦ä»¶ã«å¿œã˜ãŸæŠ€è¡“é¸å®š
   - ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç†è§£ã™ã‚‹

---

## ğŸ”— é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Remix - Cloudflare Pages](https://remix.run/docs/en/main/guides/deployment#cloudflare-pages)
- [Cloudflare Pages Functions](https://developers.cloudflare.com/pages/functions/)
- [Cloudflare Workers Runtime APIs](https://developers.cloudflare.com/workers/runtime-apis/)

### å‚è€ƒè¨˜äº‹

- [Vite Plugin Development](https://vitejs.dev/guide/api-plugin.html)
- [Web Streams API](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API)
