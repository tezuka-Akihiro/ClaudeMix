# 【機能修正提案】サブスクリプション項目削除と有効期限表示

- **サービス**: `account`
- **セクション**: `subscription`, `profile`
- **関連ドキュメント**:
  - `app/specs/account/subscription-spec.yaml`
  - `app/specs/account/profile-spec.yaml`
  - `app/components/account/profile/ProfileDisplay.tsx`

---

## 1. 提案概要

サブスクリプションのプラン内容から「広告非表示」を削除し、アカウント設定画面の「登録日」表示をサブスクリプションの「有効期限」表示に変更します。

## 2. 変更内容 (As-Is / To-Be)

### 現状 (As-Is)

- サブスクリプションプラン（スタンダード、サポーター）の特典項目に「広告非表示」が含まれている。
- アカウント設定画面（プロフィール）に「登録日」としてユーザー作成日が表示されている。

### 修正後 (To-Be)

- サブスクリプションプランの特典項目から「広告非表示」を削除する。
- アカウント設定画面の「登録日」というラベルを「有効期限」に変更し、値としてサブスクリプションの終了日（currentPeriodEnd）を表示する。
- サブスクリプション未契約の場合は、有効期限の項目に「未契約」または「-」を表示する。

## 3. 背景・目的

### 背景

- 現在のサービスには広告が存在しないため、「広告非表示」という項目は実態に合っておらず、ユーザーに誤解を与える可能性がある。
- ユーザーにとって、いつ登録したかよりも、いつサブスクリプションが切れるか（あるいは更新されるか）の方が重要度が高いため。

### 目的

- **目的1**: サービスの実態に合わせた正確な情報提供。
- **目的2**: サブスクリプション管理の利便性向上。

## 4. 変更の妥当性 (Pros / Cons)

Pros (利点):

- 不要な情報の削除により、プラン内容がシンプルで正確になる。
- 重要な情報（有効期限）がより確認しやすい位置に表示される。

Cons (懸念点):

- 「登録日」（アカウント作成日）が画面から消える。

**総合評価**:
実態に即した修正であり、ユーザーの利便性向上に寄与するため、妥当性が高いと判断します。

## 5 設計フロー

### 🗾GUIDING_PRINCIPLES.md
- 変更なし。

### 📚️func-spec.md
- `develop/account/profile/func-spec.md`:
    - 「プロフィール表示」要件において、表示データから「アカウント作成日」を削除し、「有効期限」を追加。
    - `ProfileDisplay` コンポーネント要件の表示項目を更新。
- `develop/account/subscription/func-spec.md`:
    - プラン特典から「広告非表示」を削除する方針を明記（既存のプラン設定セクションがあれば追記、なければ全体方針として管理）。

### 🖼️uiux-spec.md
- `develop/account/profile/uiux-spec.md`:
    - Mermaidダイアグラム内の「登録日時表示」を「有効期限表示」に変更。
- `develop/account/subscription/uiux-spec.md`:
    - 特典リストに関する記述を整理（必要に応じて）。

### 📋️spec.yaml
- `app/specs/account/subscription-spec.yaml`:
    - `plans.standard.features` および `plans.supporter.features` から "広告非表示" を削除。
- `app/specs/account/profile-spec.yaml`:
    - `profile_display.sections.info.fields` から `created_at` を削除、または `subscription_expiry` に変更し、ラベルを "有効期限" に設定。

### 🗂️file_list.md
- 変更なし。

### 🧬data-flow-diagram.md
- 変更なし。

## 6 TDD_WORK_FLOW.md 簡易版

以下の全項目に対して、実際のパスと編集内容を1行で記載して。

### 👁️e2e-screen-test
- `tests/e2e/account/profile.spec.ts`: 「有効期限」が表示されていることを確認するよう修正。

### 👁️e2e-section-test
- `tests/e2e/account/subscription.spec.ts`: 「広告非表示」が表示されていないことを確認するよう修正。

### 🎨CSS実装 (layer2.css, layer3.ts, layer4.ts)
- 変更なし。

### 🪨route
- `app/routes/account.settings.tsx`: `loader` から渡すデータの整理（必要あれば）。

### 🚧components.test
- `app/components/account/profile/ProfileDisplay.test.tsx` (存在する場合): 有効期限表示のテストに修正。

### 🪨components
- `app/components/account/profile/ProfileDisplay.tsx`: `user.createdAt` の代わりに `subscription.currentPeriodEnd` を表示するよう修正。

### 🚧logic.test
- 変更なし。

### 🪨logic
- 変更なし。

### 🚧data-io.test
- 変更なし。

### 🪨data-io
- 変更なし。

### その他
- なし。
