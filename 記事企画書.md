# 記事企画書

この企画書はAIがブログを書くときに、人間と共同して進めるための資料です。
この企画書をルート直下にコピー「ファイル名は 記事企画書.md」して、以下の項目を埋めてください。
各項目には記入例としてすでに実際に使用した内容が残されているので参考にしてください。
完成したら、オペレータに許可を取ってから記事作成を行ってください。
決めかねる部分があれば、3項目以内で選択肢3つ以下の粒度でオペレータに選択させてください。

## ブログコンセプト[必読]

「develop\blog\プロダクト設計書：Remix × Cloudflare Edge Blog.md」

## 何をするために（Why）

CLAUDE.mdが「毎回の回答時に参照されるべき内容ではないもの」を含んでいた問題を解決するため。具体的には、フロー実行時のみ必要な指示が毎回ロードされ、コンテキストウィンドウを圧迫していた。Anthropic公式のベストプラクティスに従い、CLAUDE.mdを最適化することで、Claude Codeとの協調開発の効率を最大化する。

## 何をしたか（What）

CLAUDE.mdを全面リファクタリングし、Anthropic公式推奨の構成に準拠させた。
具体的には以下の3つの変更を実施：

1. **フロー関連指示のスラッシュコマンド化**: 従来のセクション1と2（最上位行動原則、開発フロー数式マニフェスト）を`.claude/commands/tdd-flow.md`に移行し、必要時のみ`/tdd-flow`コマンドで呼び出す形式に変更。
2. **公式推奨5項目の実装**: 共通bashコマンド、コアファイル構造、テスト指示、開発環境セットアップ、プロジェクト固有の警告を追加。特に欠けていた「共通bashコマンド」「開発環境セットアップ詳細」を新規追加。
3. **命名規則の明確化**: `spec.yaml` → `{section}-spec.yaml`（例: `blog-spec.yaml`）に統一し、検索性を向上。

## どんな壁があって（Challenge）

1. **コンテキスト負荷の壁**: 毎回の会話で不要な情報（フロー実行指示）がロードされ、本来必要なプロジェクト固有の「常識」に集中できなかった。
2. **公式推奨との乖離**: 既存のCLAUDE.mdは独自形式で、Anthropic公式のベストプラクティス（`content/blog/posts/projects-guide.md`で要約）に準拠していなかった。必要な項目（共通コマンド、セットアップ詳細）が欠けており、AIが参照すべき実践的な情報が不足。
3. **検索の問題**: `spec.yaml`で検索すると、どのセクションのspecかが不明確で、意図したファイル（例: `blog-spec.yaml`）が最初にヒットしなかった。

## どう乗り越えたか（Solution）

1. **スラッシュコマンドによる分離**: フロー実行時のみ必要な内容を`.claude/commands/tdd-flow.md`に分離。これにより、毎回のコンテキストから約1,600トークン削減し、プロジェクト固有の「常識」に集中できるようにした。
2. **公式準拠の構成に全面移行**: Anthropic公式が推奨する5項目を完全実装。特に`npm run dev:wrangler`などの頻繁に使用するコマンド一覧を追加し、AIが自律的に正しいコマンドを選択できるようにした。また、E2Eテストはオペレーター実行と明記し、Claudeの責務を明確化。
3. **{section}-spec.yaml形式への統一**: `blog-spec.yaml`, `user-spec.yaml`のような明示的な命名規則を採用。検索時に必ず最初にヒットし、セクションが一目で分かる形式に変更。

## 使用するテンプレート

`content\blog\template.md`
理由：Claude Code Projectsの設計改善という体系的な内容であり、トラブルシューティングではなく、ベストプラクティスの実装記事のため。

## カテゴリ

app\specs\blog\posts-spec.yaml で許可されているもののみ使用可
`Claude Best Practices`

## タグ

app\specs\blog\posts-spec.yaml で許可されているもののみ使用可
`Projects`, `Prompts`, `architecture`

## 連載検討

なし。この記事単体で完結する。

## オペレーターへの確認事項

以下の点について、ご意見をお聞かせください：

1. **カテゴリの選択**: `Claude Best Practices`と`ClaudeMix Philosophy`のどちらが適切でしょうか？
   - Best Practices: 公式推奨への準拠という「実践的なノウハウ」の側面
   - Philosophy: CLAUDE.mdの設計思想という「哲学」の側面

2. **記事のトーン**:
   - 技術的詳細を重視（開発者向け）
   - 概念的理解を重視（初心者にも分かりやすく）
   - 両方のバランス

3. **追加すべき内容**: 他に記事に含めるべき情報はありますか？
